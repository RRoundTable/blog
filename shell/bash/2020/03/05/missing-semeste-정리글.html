<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Missing Semester 정리글 | RoundTable</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Missing Semester 정리글" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Missing Semester 정리글" />
<meta property="og:description" content="Missing Semester 정리글" />
<link rel="canonical" href="https://rroundtable.github.io//blog/shell/bash/2020/03/05/missing-semeste-%EC%A0%95%EB%A6%AC%EA%B8%80.html" />
<meta property="og:url" content="https://rroundtable.github.io//blog/shell/bash/2020/03/05/missing-semeste-%EC%A0%95%EB%A6%AC%EA%B8%80.html" />
<meta property="og:site_name" content="RoundTable" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-05T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"Missing Semester 정리글","headline":"Missing Semester 정리글","dateModified":"2020-03-05T00:00:00-06:00","datePublished":"2020-03-05T00:00:00-06:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://rroundtable.github.io//blog/shell/bash/2020/03/05/missing-semeste-%EC%A0%95%EB%A6%AC%EA%B8%80.html"},"url":"https://rroundtable.github.io//blog/shell/bash/2020/03/05/missing-semeste-%EC%A0%95%EB%A6%AC%EA%B8%80.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://rroundtable.github.io//blog/feed.xml" title="RoundTable" /><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4NHFHZZ2SF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4NHFHZZ2SF');
</script><link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Missing Semester 정리글 | RoundTable</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Missing Semester 정리글" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Missing Semester 정리글" />
<meta property="og:description" content="Missing Semester 정리글" />
<link rel="canonical" href="https://rroundtable.github.io//blog/shell/bash/2020/03/05/missing-semeste-%EC%A0%95%EB%A6%AC%EA%B8%80.html" />
<meta property="og:url" content="https://rroundtable.github.io//blog/shell/bash/2020/03/05/missing-semeste-%EC%A0%95%EB%A6%AC%EA%B8%80.html" />
<meta property="og:site_name" content="RoundTable" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-05T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"Missing Semester 정리글","headline":"Missing Semester 정리글","dateModified":"2020-03-05T00:00:00-06:00","datePublished":"2020-03-05T00:00:00-06:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://rroundtable.github.io//blog/shell/bash/2020/03/05/missing-semeste-%EC%A0%95%EB%A6%AC%EA%B8%80.html"},"url":"https://rroundtable.github.io//blog/shell/bash/2020/03/05/missing-semeste-%EC%A0%95%EB%A6%AC%EA%B8%80.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://rroundtable.github.io//blog/feed.xml" title="RoundTable" /><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4NHFHZZ2SF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4NHFHZZ2SF');
</script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
<script type="text/javascript">
require.config({
  paths: {
    jquery: 'https://code.jquery.com/jquery-3.5.0.min',
    plotly: 'https://cdn.plot.ly/plotly-latest.min'
  },

  shim: {
    plotly: {
      deps: ['jquery'],
      exports: 'plotly'
    }
  }
});
</script>

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">RoundTable</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/images/2020-11-15-engien-vector-and-eigen-value.html">eigenvalue 와 enginevector 정리글</a><a class="page-link" href="/blog/about/">About Me</a><a class="page-link" href="/blog/search/">Search</a><a class="page-link" href="/blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Missing Semester 정리글</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-03-05T00:00:00-06:00" itemprop="datePublished">
        Mar 5, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      19 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/blog/categories/#shell">shell</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blog/categories/#bash">bash</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="missing-semester-정리글">Missing Semester 정리글</h1>

<h2 id="1-shell">1. Shell</h2>

<p>리눅스의 쉘은 명령어와 프로그램을 실행할 때 사용하는 인터페이스이다.</p>

<p><img src="/blog/images/2020-03-05-missing-semeste-정리글/shell.png" alt="" title="Shell" /></p>

<p><strong>echo</strong></p>

<p>리눅스 명령어 echo는 주어진 문자열을, 문자열 사이에 포함된 공백과 줄 마지막에 개행문자를 포함하여 표준출력으로 출력하는 명령어다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo "Hellow Wolrd"
&gt;&gt;&gt; Hellow World

echo Hellow\ Wolrd
&gt;&gt;&gt; Hellow World

echo $HOME
&gt;&gt;&gt; /root

echo $PATH
&gt;&gt;&gt; $PATH에 포함된 주소들을 출력

which echo
&gt;&gt;&gt; /usr/bin/echo # 사용하고 있는 echo 위치 출력

</code></pre></div></div>

<p><strong>pwd</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pwd
&gt;&gt;&gt; /home # present working directory
</code></pre></div></div>

<p><strong>cd</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /roundtable # change directory
</code></pre></div></div>

<p><strong>. (dot) / .. (dot dot)</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.. # parent directory
cd .. # /home/roundtable -&gt; /home

. # current directory
cd ./roundtable # /home -&gt; /home/roundtable
</code></pre></div></div>

<p><strong>ls</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls
&gt;&gt;&gt; print all files in the current directory
ls -help
&gt;&gt;&gt; 다양한 옵션에 대한 정보를 받아볼 수 있음
ls -l
&gt;&gt;&gt; 파일에 대한 추가적인 정보를 얻을 수 있음
</code></pre></div></div>

<p><strong>~</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ~ # home directory
cd ~/roundtable # cd /home/roundtable
</code></pre></div></div>

<p><strong>cd -</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd - # back to parent directory
</code></pre></div></div>

<p><strong>mv</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mv &lt;current_file&gt; &lt;new_file&gt; # rename the file or move the file in dirrent directory
</code></pre></div></div>

<p><strong>cp</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp &lt;current_file&gt; &lt;new_file&gt; # copy
cp -r &lt;current folder&gt; &lt;new_folder&gt;
</code></pre></div></div>

<p><strong>rm</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rm &lt;current_file&gt; # remove
rmdir &lt;folder&gt;
</code></pre></div></div>

<p><strong>mkdir</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir &lt;new directory name&gt; # make directory
</code></pre></div></div>

<p><strong>man</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>man ls # manual page for ls
# if you want to quik, press q
</code></pre></div></div>

<p><strong>ctrl + l</strong>: clear the terminal</p>

<p><strong>Angle bracket signs</strong></p>

<p>input stream, output stream이 존재한다. 이를 적절히 조절할 수 있다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># &lt; file 
# &gt; file

echo hello &gt; hello.txt # hello(print)가 hello.txt의 입력으로 들어간다.
cat hello.txt
&gt;&gt;&gt; hello

cat &lt; hello.txt &gt; hello2.txt
cat hello2.txt
&gt;&gt;&gt; hello
</code></pre></div></div>

<table>
  <tbody>
    <tr>
      <td>**</td>
      <td>(pipe)**</td>
    </tr>
  </tbody>
</table>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># file1 | file2 # make output of file1 input of file2
# tail # 마지막 line만 출력해준다.

ls -l / tail -n1
&gt;&gt;&gt; drwxrwxr-x 11 ubuntu ubuntu 4096 Mar  4 12:55 dev # print last line

curl --head --silent google.com | grep -i content-length
</code></pre></div></div>

<p><strong>tail</strong></p>

<p>마지막 line만 출력해준다.</p>

<p><strong>curl</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl --head --silent google.com | grep -i content-length
</code></pre></div></div>

<p><strong>sudo: root permission</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo find -L /sys/class/backlight -maxdepth 2 -name '*brightness*'
&gt;&gt;&gt; /sys/class/backlight/thinkpad_screen/brightness

cd /sys/class/backlight/thinkpad_screen

sudo echo 3 &gt; brightness

&gt;&gt;&gt; An error occurred while redirecting file 'brightness'
open: Permission denied


echo 3 | sudo tee brightness
</code></pre></div></div>

<p><strong>cat</strong>: concatenate</p>

<p>파일의 내용을 출력</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat file1
# file1의 내용 출력

cat file1 file2 file3
# file1, file2, file3 이어서 출력

cat &gt; file1 # (내용을 입력하고 ctrl + d를 눌러 저장한다.) 기존 내용을 지우고
cat &gt;&gt; file1 # (내용을 입력하고 ctrl + d를 눌러 저장한다.) 기존의 내용에 이어서

cat file1 file2 &gt; file3 # file1 + file2 = file3
</code></pre></div></div>

<p><strong>cd /sys</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /sys # to access various kernel parameters

total 0
drwxr-xr-x   2 root root  0 Mar  5 08:03 block
drwxr-xr-x  47 root root  0 Mar  3 06:53 bus
drwxr-xr-x  69 root root  0 Mar  3 06:51 class
drwxr-xr-x   4 root root  0 Mar  5 08:03 dev
drwxr-xr-x  71 root root  0 Mar  3 04:43 devices
drwxrwxrwt   2 root root 40 Mar  3 04:43 firmware
drwxr-xr-x  12 root root  0 Mar  3 04:43 fs
drwxr-xr-x   2 root root  0 Mar  5 08:03 hypervisor
drwxr-xr-x  14 root root  0 Mar  5 08:03 kernel
drwxr-xr-x 219 root root  0 Mar  5 08:03 module
drwxr-xr-x   2 root root  0 Mar  5 08:03 power
</code></pre></div></div>

<p>shell은 단순한 argument가 아니라 일종의 프로그래밍이라고 볼 수 있다. 예를 들어서 조건문이나 반복문같은 설정을 할 수 있다.</p>

<h2 id="2-shell-tools-and-scripting">2. Shell Tools and Scripting</h2>

<p>’’ 하고 “” 는 유사해보이지만, 서로 다르다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo=bar
echo "$foo"
# prints bar
echo '$foo'
# prints $foo

echo "Value is $foo"
# prints 'Value is foo'

echo 'Value is $foo'
# prints 'Value is $foo'
</code></pre></div></div>

<p>bash는  if, case, while, for와 같은 구문을 제공한다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mcd (){
	mkdir -p "$1"
	cd "$1"
}
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/home: vim mcd.sh
/home: source mcd.sh
/home: mcd.sh test

/home/test:  # /home -&gt; mkdir /home/test -&gt; cd /home/test
</code></pre></div></div>

<ul>
  <li>$0 - Name of the script</li>
  <li>$1 to $9 - Arguments to the script. $1 is the first argument and so on.</li>
  <li>$@ - All the arguments</li>
  <li>$# - Number of arguments</li>
  <li>$? - Return code of the previous command</li>
  <li>$$ - Process Identification number for the current script</li>
  <li>!! - Entire last command, including arguments. A common pattern is to execute a command only for it to fail due to missing permissions, then you can quickly execute it with sudo by doing sudo !!</li>
  <li>$_ - Last argument from the last command. If you are in an interactive shell, you can also quickly get this value by typing Esc followed by .</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo "Hello"
&gt;&gt;&gt; Hello

echo $?
&gt;&gt;&gt; 0 # No Error

grep foobar mcd.sh
echo $?
&gt;&gt;&gt; 1 # Error
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># || or
false || echo "Oops, fail" 
# Oops, fail


true || echo "Will not be printed"
#

# &amp;&amp; and
true &amp;&amp; echo "Things went well"
# Things went well

false &amp;&amp; echo "Will not be printed"
#

false ; echo "This will always run"
# This will always run
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nb">echo</span> <span class="s2">"Starting program at </span><span class="si">$(</span><span class="nb">date</span><span class="si">)</span><span class="s2">"</span> <span class="c"># Date will be substituted</span>

<span class="nb">echo</span> <span class="s2">"Running program </span><span class="nv">$0</span><span class="s2"> with </span><span class="nv">$# </span><span class="s2">arguments with pid </span><span class="nv">$$</span><span class="s2">"</span>

<span class="k">for </span>file <span class="k">in</span> <span class="nv">$@</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">grep </span>foobar <span class="nv">$file</span> <span class="o">&gt;</span> /dev/null 2&gt; /dev/null
    <span class="c"># When pattern is not found, grep has exit status 1</span>
    <span class="c"># We redirect STDOUT and STDERR to a null register since we do not care about them</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$?</span> <span class="nt">-ne</span> 0 <span class="o">]]</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"File </span><span class="nv">$file</span><span class="s2"> does not have any foobar, adding one"</span>
        <span class="nb">echo</span> <span class="s2">"# foobar"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$file</span><span class="s2">"</span>
    <span class="k">fi
done</span>
</code></pre></div></div>

<p><strong>?</strong> : one of character
***** : any amount of characters</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
convert image.{png,jpg}
# Will expand to
convert image.png image.jpg

cp /path/to/project/{foo,bar,baz}.sh /newpath
# Will expand to
cp /path/to/project/foo.sh /path/to/project/bar.sh /path/to/project/baz.sh /newpath

# Globbing techniques can also be combined
mv *{.py,.sh} folder
# Will move all *.py and *.sh files


mkdir foo bar
# This creates files foo/a, foo/b, ... foo/h, bar/a, bar/b, ... bar/h
touch {foo,bar}/{a..j}
touch foo/x bar/y
# Show differences between files in foo and bar
diff &lt;(ls foo) &lt;(ls bar)
# Outputs
# &lt; x
# ---
# &gt; y
</code></pre></div></div>

<p><strong>in python</strong></p>

<p><strong>Shebang</strong>은 (사전에 검색해보면) 쉬뱅이라고 읽습니다. 쉬뱅은 <code class="highlighter-rouge">#!</code>로 시작하는 문자열이며 스크립트의 맨 첫번째 라인에 있습니다. 쉬뱅은 유닉스 계열 운영체제에서 스크립트가 실행될 때, 파이썬, 배쉬쉘 등 어떤 인터프리터에 의해서 동작이 되는지 알려줍니다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/local/bin/python
</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>shellcheck</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ shellcheck test.sh

In test.sh line 2:
T0=`date +%s`
   ^-- SC2006: Use $(..) instead of legacy `..`.

In test.sh line 4:
T1=`date +%s`
   ^-- SC2006: Use $(..) instead of legacy `..`.

In test.sh line 5:
ELAPSED_TIME=$((T1-T0))
^-- SC2034: ELAPSED_TIME appears unused. Verify it or export it.

In test.sh line 7:
echo "START_TIME: " ${T0}
                    ^-- SC2086: Double quote to prevent globbing and word splitting.

In test.sh line 8:
echo "END_TIME: " ${T1}
                  ^-- SC2086: Double quote to prevent globbing and word splitting.

In test.sh line 9:
echo "ELAPSED_TIME: ${ELAPSES_TIME} sec"
                    ^-- SC2153: Possible misspelling: ELAPSES_TIME may not be assigned, but ELAPSED_TIME is.
</code></pre></div></div>

<p><strong>export</strong></p>

<p>환경변수를 저장하는 역할, 터미널이 꺼지면 사라진다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi ~/.bashrc # 해당 주소에서 작업을 하게되면 영구적으로 남는다.

export water="삼다수"
export TEMP_DIR=/tmp
export BASE_DIR=$TEMP_DIR/backup
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># gpu idx를 지정할 때 사용할 수도 있다.

export CUDA_VISIBLE_DEVICES = 1
</code></pre></div></div>

<p><strong>Finding how to use commands</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls -h
ls --help

man ls
</code></pre></div></div>

<ul>
  <li>manpage</li>
  <li><a href="https://tldr.sh/">TLDR pages</a>: 간단하게 찾아볼 수 있음</li>
</ul>

<p><strong>Finding files</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Find all directories named src
find . -name src -type d
# Find all python files that have a folder named test in their path
find . -path '**/test/**/*.py' -type f
# Find all files modified in the last day
find . -mtime -1
# Find all zip files with size in range 500k to 10M
find . -size +500k -size -10M -name '*.tar.gz'

# Delete all files with .tmp extension
find . -name '*.tmp' -exec rm {} \;
# Find all PNG files and convert them to JPG
find . -name '*.png' -exec convert {} {.}.jpg \;
</code></pre></div></div>

<p><strong>Finding code</strong></p>

<p><a href="http://man7.org/linux/man-pages/man1/grep.1.html"><strong>grep</strong></a></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grep foobar mcd.sh
grep -R foobar . # source code 검색도 가능
</code></pre></div></div>

<p><a href="https://github.com/BurntSushi/ripgrep"><strong>ripgrep</strong></a></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Find all python files where I used the requests library
rg -t py 'import requests'
# Find all files (including hidden files) without a shebang line
rg -u --files-without-match "^#!"
# Find all matches of foo and print the following 5 lines
rg foo -A 5
# Print statistics of matches (# of matched lines and files )
rg --stats PATTERN
</code></pre></div></div>

<p><strong>Finding shell commands</strong></p>

<p><strong>history</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>history

 1 cd .\OneDrive\sourceCode\CPPS\
 2 cd ..
 3 cd .\EEN-with-Keras\

</code></pre></div></div>

<p><strong>Ctrl + R</strong> : history 추적, 유용</p>

<p><strong>zsh</strong>: 유용한 bash 도구</p>

<p><strong>Directory Naviation</strong></p>

<ul>
  <li>ls -R</li>
  <li><a href="https://linux.die.net/man/1/tree">tree</a></li>
  <li><a href="https://github.com/Canop/broot">broot</a></li>
  <li>nnn</li>
  <li>ranger</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls -R
tree 
</code></pre></div></div>

<h2 id="3-git">3. Git</h2>

<h3 id="gits-data-model">Git’s data model</h3>

<ul>
  <li>snapshots</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;root&gt; (tree): snapshots, top-level directory
|
+- foo (tree)
|  |
|  + bar.txt (blob, contents = "hello world")
|
+- baz.txt (blob, contents = "git is wonderful")
</code></pre></div></div>

<ul>
  <li>Modeling history: relating snapshots</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>o &lt;-- o &lt;-- o &lt;-- o
^  
\
--- o &lt;-- o
</code></pre></div></div>

<p>with the newly created merge commit shown in bold:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>o &lt;-- o &lt;-- o &lt;-- o &lt;---- o
            ^            /
             \          v
              --- o &lt;-- o
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// a file is a bunch of bytes
type blob = array&lt;byte&gt;

// a directory contains named files and directories
type tree = map&lt;string, tree | file&gt;

// a commit has parents, metadata, and the top-level tree
type commit = struct {
    parent: array&lt;commit&gt;
    author: string
    message: string
    snapshot: tree
}

type object = blob | tree | commit # 모두 다 object다


objects = map&lt;string, object&gt;

def store(object):
    id = sha1(object)
    objects[id] = object

def load(id):
    return objects[id]
</code></pre></div></div>

<p><strong>References</strong>: HEAD</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>references = map&lt;string, string&gt;

def update_reference(name, id):
    references[name] = id

def read_reference(name):
    return references[name]

def load_reference(name_or_id):
    if name_or_id in references:
        return load(references[name_or_id])
    else:
        return load(name_or_id)
</code></pre></div></div>

<h3 id="hook">Hook</h3>

<p>특정상황에서 특정 스크립트를 실행할 수 있도록 하는 기능</p>

<p>위치: cd ./git/hook</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

<span class="c"># git diff --exit-code --cached --name-only --diff-filter=ACM -- '*.png' '*.jpg'</span>
<span class="c"># 위의 명령어는 현재 add 되어있는 파일 중, .png와 .jpg 확장자를 가진 파일들을 '이름만' 추출합니다.</span>
<span class="nv">images</span><span class="o">=</span><span class="si">$(</span>git diff <span class="nt">--exit-code</span> <span class="nt">--cached</span> <span class="nt">--name-only</span> <span class="nt">--diff-filter</span><span class="o">=</span>ACM <span class="nt">--</span> <span class="s1">'*.png'</span> <span class="s1">'*.jpg'</span><span class="si">)</span>

<span class="c"># 추출된 이미지 파일들을 ImageOptimCLI에 넘겨주기만 하면 되는 것이죠!</span>
<span class="c"># 이미지들이 압축되어 변경되었으니 다시 add 해줘야겠죠?</span>
<span class="si">$(</span><span class="nb">exit</span> <span class="nv">$?</span><span class="si">)</span> <span class="o">||</span> <span class="o">(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$images</span><span class="s2">"</span> | ~/.woowa/imageoptim-cli/bin/imageOptim <span class="o">&amp;&amp;</span> git add <span class="nv">$images</span><span class="o">)</span>

</code></pre></div></div>

<ul>
  <li>
    <p><strong>pre-commit</strong>: https://pre-commit.com/</p>
  </li>
  <li>
    <p>reference: https://woowabros.github.io/tools/2017/07/12/git_hook.html</p>
  </li>
</ul>

<h3 id="github-deployment--actions">Github Deployment &amp; Actions</h3>

<p>https://blog.banksalad.com/tech/become-an-organization-that-deploys-1000-times-a-day/?fbclid=IwAR1X6CC1mz6Akrxcyt-BpeMZ-ZnpLOvdGlK7dvxh0De85D1qsEoLN2JEhAU</p>

<h3 id="git-command-line-interface">Git command-line interface</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git help &lt;command&gt;: get help for a git command
git init: creates a new git repo, with data stored in the .git directory
git status: tells you what’s going on
git add &lt;filename&gt;: adds files to staging area
git commit: creates a new commit
git log: shows a flattened log of history
git log --all --graph --decorate: visualizes history as a DAG
git diff &lt;filename&gt;: show differences since the last commit
git diff &lt;revision&gt; &lt;filename&gt;: shows differences in a file between snapshots
git checkout &lt;revision&gt;
</code></pre></div></div>

<p><strong>Branching and merging</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git branch: shows branches
git branch &lt;name&gt;: creates a branch
git checkout -b &lt;name&gt;: creates a branch and switches to it
same as git branch &lt;name&gt;; git checkout &lt;name&gt;
git merge &lt;revision&gt;: merges into current branch
git mergetool: use a fancy tool to help resolve merge conflicts
git rebase: rebase set of patches onto a new base
</code></pre></div></div>

<p><strong>Remotes</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote: list remotes
git remote add &lt;name&gt; &lt;url&gt;: add a remote
git push &lt;remote&gt; &lt;local branch&gt;:&lt;remote branch&gt;: send objects to remote, and update remote reference
git branch --set-upstream-to=&lt;remote&gt;/&lt;remote branch&gt;: set up correspondence between local and remote branch
git fetch: retrieve objects/references from a remote
git pull: same as git fetch; git merge
git clone: download repository from remote
</code></pre></div></div>

<p><strong>Undo</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit --amend: edit a commit’s contents/message
git reset HEAD &lt;file&gt;: unstage a file
git checkout -- &lt;file&gt;: discard changes
</code></pre></div></div>
<ul>
  <li>https://git-scm.com/book/en/v2</li>
</ul>

<h3 id="github로-협업하기">Github로 협업하기</h3>

<p><strong>checkout</strong>
https://mytory.net/archives/10078</p>

<p><strong>stash</strong></p>

<p>특정 커밋 선택해서 반영하기:cherry pick</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git cherry-pick {Commit ID}
</code></pre></div></div>

<p>여러개의 커밋을 반영하기: rebase</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git rebase {가져올 Branch 이름}
</code></pre></div></div>

<ul>
  <li>https://www.tuwlab.com/ece/22218</li>
</ul>

<h3 id="github-actions"><strong>Github Actions</strong></h3>

<ul>
  <li>
    <p>Build</p>

    <p>코드 스타일 검사를 위한 lint</p>

    <p>유닛 테스트를 실행하는 test</p>

    <p>docker image를 build하는 build</p>
  </li>
  <li>
    <p>Deploy</p>

    <p>아직은 경험하기 힘든 영역이라고 생각</p>
  </li>
</ul>

<h3 id="gitflow">Gitflow</h3>

<ul>
  <li>https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow</li>
</ul>

<h3 id="github-slack-integration">Github slack integration</h3>

<ul>
  <li>
    <p>https://slack.github.com/</p>
  </li>
  <li>
    <p>http://wepla.net/?p=2353</p>
  </li>
</ul>

<h3 id="github-commit-message">Github Commit message</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Type: 제목

본문

꼬리말
</code></pre></div></div>

<p>feat: 새로운 기능을 추가할 경우
fix: 버그를 고친 경우
docs: 문서 수정한 경우
style: 코드 포맷 변경, 세미 콜론 누락, 코드 수정이 없는 경우
refactor: 프로덕션 코드 리팩터링
test: 테스트 추가, 테스트 리팩터링 (프로덕션 코드 변경 없음)
chore: 빌드 테스크 업데이트, 패키지 매니저 설정할 경우 (프로덕션 코드 변경 없음)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>feat: Summarize changes in around 50 characters or less

More detailed explanatory text, if necessary. Wrap it to about 72
characters or so. In some contexts, the first line is treated as the
subject of the commit and the rest of the text as the body. The
blank line separating the summary from the body is critical (unless
you omit the body entirely); various tools like `log`, `shortlog`
and `rebase` can get confused if you run the two together.

Explain the problem that this commit is solving. Focus on why you
are making this change as opposed to how (the code explains that).
Are there side effects or other unintuitive consequenses of this
change? Here's the place to explain them.

Further paragraphs come after blank lines.

 - Bullet points are okay, too

 - Typically a hyphen or asterisk is used for the bullet, preceded
   by a single space, with blank lines in between, but conventions
   vary here

If you use an issue tracker, put references to them at the bottom,
like this:

Resolves: #123
See also: #456, #789
</code></pre></div></div>

<ul>
  <li>https://sujinlee.me/professional-github/</li>
  <li>https://junwoo45.github.io/2020-02-06-commit_template/?fbclid=IwAR2HKgwO9imOxWAvWUPtaXDymUzMRRJ18LnwR_Cwa3s6kcrFidIwvz8CvmY</li>
</ul>

<h2 id="4-python-ci-핑퐁팀-사례">4. <a href="https://blog.pingpong.us/python-in-pingpong/?fbclid=IwAR0ijQfAoKTFtXsppYN-b9iqw_vnnR6VoEMcL9Wr8TJFUyHnuOBwBgyHCZw#%EC%8B%9C%EC%9E%91%EC%9D%80-%EA%B0%80%EB%B3%8D%EA%B2%8C-%EC%BD%94%EB%93%9C-%ED%92%88%EC%A7%88-%EA%B4%80%EB%A6%AC-%EB%8F%84%EA%B5%AC">Python CI: 핑퐁팀 사례</a></h2>

<p><strong>코드 스타일 확인 및 포맷 자동화</strong>**</p>

<ul>
  <li>
    <p><a href="https://github.com/psf/black">black</a>
  Python Software Foundation에서 작성한 Python 자동 포맷팅 도구입니다. pycodestyle을 따른다.</p>
  </li>
  <li>
    <p>flake8</p>

    <p><strong>pycodestyle + pyflakes + 복잡도 검사 기능</strong></p>

    <p>Python Code Quality Authority (PyCQA)에서 작성한 스타일 체크 도구로, 플러그인을 붙이기 쉬운 것이 장점이다. docstring 형식 부분을 잡아내기 위해서 적용하기도 한다.</p>
  </li>
  <li>
    <p>yapf
  구글에서 배포하는 자동 포맷팅 도구입니다. 다른 포맷팅 도구들이 스타일 가이드를 어긴 부분만 잡아준다면, yapf는 스타일 가이드를 어기지 않았더라도 다시 포맷팅을 진행하는 상당히 엄격한 자동 포맷팅 도구입니다.</p>
  </li>
  <li>
    <p>isort: import statement 정렬하는 도구</p>
  </li>
</ul>

<p><strong>Type Checker</strong></p>

<p>Type Hints란, 예상치 못한 타입이 변수에 할당되는 것을 검사기가 막아주는 역할을 한다.</p>

<ul>
  <li><a href="https://github.com/microsoft/pyright">pyright</a>: vscode와 연동가능</li>
  <li>mypy</li>
  <li>pyre-check</li>
</ul>

<p><strong>CI</strong></p>

<ul>
  <li>CircleCI</li>
  <li>Jenkins Blueocean</li>
  <li>GitHub Actions</li>
  <li>travisCI</li>
</ul>

<p><strong>테스트 코드</strong></p>

<ul>
  <li><a href="https://docs.pytest.org/en/latest/">pytest</a></li>
  <li>unittest</li>
</ul>

<p><strong>Code Coverage</strong></p>

<ul>
  <li>pytest-cov</li>
</ul>

<p><strong>초기 템플릿 생성</strong></p>

<h2 id="5-debugging-and-profiling">5. Debugging and Profiling</h2>

<h3 id="logging">Logging</h3>

<ul>
  <li>print문 삽입하는 법</li>
  <li><a href="https://docs.python.org/ko/3/howto/logging.html">log</a>: 일반적으로 log가 더 좋은 방법</li>
</ul>

<p><strong>Log의 장점</strong></p>

<ol>
  <li>log를 사용하면 file로 저장할 수 있다. (remote server에도 가능)</li>
  <li>Serverity level별로 나타낼 수 있다.
    <ol>
      <li>INFO</li>
      <li>DEBUG</li>
      <li>WARN</li>
      <li>ERROR</li>
    </ol>
  </li>
  <li>새로운 이슈가 추가될 때, 더 골고루 살펴볼 수 있다.</li>
</ol>

<p>python logging 모듈 활용하기</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># logger instance
</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="c1"># handler
</span><span class="n">streamHandler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
<span class="n">fileHandler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="s">'./server.log'</span><span class="p">)</span>


<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">streamHandler</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">FileHandler</span><span class="p">)</span>


<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">'원하는 log 문 작성하기'</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>https://hamait.tistory.com/880</li>
</ul>

<h3 id="debugger">Debugger</h3>

<p><a href="https://docs.python.org/3/library/pdb.html">pdb</a></p>

<h3 id="static-analysis">Static Analysis</h3>

<p><a href="https://www.shellcheck.net/">shellcheck</a></p>

<h3 id="linting">linting</h3>

<p>잠재적인 오류에 대한 코드를 분석하는 프로그램.</p>

<p>flake8을 이용하여 진행할 수 있다.</p>

<h3 id="profiling">Profiling</h3>

<h4 id="timing">Timing</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span><span class="p">,</span> <span class="n">random</span>

<span class="n">n</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>

<span class="c1"># Get current time
</span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Do some work
</span><span class="k">print</span><span class="p">(</span><span class="s">"Sleeping for {} ms"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Compute time between start and now
</span><span class="k">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>

<span class="c1"># Output
# Sleeping for 500 ms
# 0.5713930130004883
</span></code></pre></div></div>

<p>위의 예시처럼 시간을 측정하면, 실제 시간과 차이가 나는 경우가 있다. 예를 들면, 다른 작업이 cpu를 할당 받고 있어서 그 후에 실행된 경우가 그러한 경우이다. 따라서, 해당 소스코드의 동작시간을 알고 싶다면, User가 사용한 시간 + system이 사용한 시간을 더해서 구할 수 있다. (User + Sys)</p>

<ul>
  <li>Real - Wall clock elapsed time from start to finish of the program, including the time taken by other processes and time taken while blocked (e.g. waiting for I/O or network)</li>
  <li>User - Amount of time spent in the CPU running user code</li>
  <li>Sys - Amount of time spent in the CPU running kernel code</li>
</ul>

<h4 id="profilers">Profilers</h4>
<h5 id="cpu">CPU</h5>

<p>tracing, sampling profilers 두 가지의 종류가 있다.</p>

<p>tracing profiler는 모든 function call을 기록하는 반면에 sampling profiler는 특정 간격마다 기록한다.</p>

<p>python의 경우 cProfile 모듈을 이용할 수 있다. 아래와 같은 소스코드가 있다고 가정하자.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python
</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="p">,</span> <span class="n">re</span>

<span class="k">def</span> <span class="nf">grep</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">file</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()):</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="nb">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"{}: {}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">line</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">times</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
        <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">:]:</span>
            <span class="n">grep</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">file</span><span class="p">)</span>

</code></pre></div></div>
<p>아래와 같이 프로파일링을 진행할 수 있다. 모든 function call을 확인할 수 있다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python -m cProfile -s tottime grep.py 1000 '^(import|\s*def)[^,]*$' *.py

[omitted program output]

 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     8000    0.266    0.000    0.292    0.000 {built-in method io.open}
     8000    0.153    0.000    0.894    0.000 grep.py:5(grep)
    17000    0.101    0.000    0.101    0.000 {built-in method builtins.print}
     8000    0.100    0.000    0.129    0.000 {method 'readlines' of '_io._IOBase' objects}
    93000    0.097    0.000    0.111    0.000 re.py:286(_compile)
    93000    0.069    0.000    0.069    0.000 {method 'search' of '_sre.SRE_Pattern' objects}
    93000    0.030    0.000    0.141    0.000 re.py:231(compile)
    17000    0.019    0.000    0.029    0.000 codecs.py:318(decode)
        1    0.017    0.017    0.911    0.911 grep.py:3(&lt;module&gt;)

[omitted lines]
</code></pre></div></div>

<p>line마다 profiling 하고 싶다면, kernprof를 사용할 수 있다. 단, 데코레이터를 사용해야한다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python
</span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="c1"># This is a decorator that tells line_profiler
# that we want to analyze this function
</span><span class="o">@</span><span class="n">profile</span>
<span class="k">def</span> <span class="nf">get_urls</span><span class="p">():</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://missing.csail.mit.edu'</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">'lxml'</span><span class="p">)</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'a'</span><span class="p">):</span>
        <span class="n">urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">[</span><span class="s">'href'</span><span class="p">])</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">get_urls</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kernprof -l -v a.py
Wrote profile results to urls.py.lprof
Timer unit: 1e-06 s

Total time: 0.636188 s
File: a.py
Function: get_urls at line 5

Line #  Hits         Time  Per Hit   % Time  Line Contents
==============================================================
 5                                           @profile
 6                                           def get_urls():
 7         1     613909.0 613909.0     96.5      response = requests.get('https://missing.csail.mit.edu')
 8         1      21559.0  21559.0      3.4      s = BeautifulSoup(response.content, 'lxml')
 9         1          2.0      2.0      0.0      urls = []
10        25        685.0     27.4      0.1      for url in s.find_all('a'):
11        24         33.0      1.4      0.0          urls.append(url['href'])
</code></pre></div></div>

<h5 id="memory">Memory</h5>

<p>python을 사용할 시에, 데코레이터를 사용한 후, memory_profiler를 사용하면, 메모리 사용량을 검사할 수 있다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">profile</span>
<span class="k">def</span> <span class="nf">my_func</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">6</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">7</span><span class="p">)</span>
    <span class="k">del</span> <span class="n">b</span>
    <span class="k">return</span> <span class="n">a</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">my_func</span><span class="p">()</span>

</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python -m memory_profiler example.py
Line #    Mem usage  Increment   Line Contents
==============================================
     3                           @profile
     4      5.97 MB    0.00 MB   def my_func():
     5     13.61 MB    7.64 MB       a = [1] * (10 ** 6)
     6    166.20 MB  152.59 MB       b = [2] * (2 * 10 ** 7)
     7     13.61 MB -152.59 MB       del b
     8     13.61 MB    0.00 MB       return a
</code></pre></div></div>

<blockquote>
  <p>파이썬에서 데코레이터란</p>

  <p>https://wikidocs.net/23106</p>
</blockquote>

<h5 id="event-profiling">Event Profiling</h5>

<ul>
  <li>strace</li>
  <li>perf</li>
</ul>

<h4 id="visualization">Visualization</h4>

<ul>
  <li>Call graphs: python - <a href="http://pycallgraph.slowchop.com/en/master/">pycallgraph</a></li>
  <li>Flame Graph</li>
</ul>

<h3 id="resource-monitoring">Resource Monitoring</h3>

<ul>
  <li><strong>General Monitoring</strong> - Probably the most popular is <a href="https://hisham.hm/htop/index.php"><code class="highlighter-rouge">htop</code></a>, which is an improved version of <a href="http://man7.org/linux/man-pages/man1/top.1.html"><code class="highlighter-rouge">top</code></a>. <code class="highlighter-rouge">htop</code> presents various statistics for the currently running processes on the system. <code class="highlighter-rouge">htop</code> has a myriad of options and keybinds, some useful ones are: `` to sort processes, <code class="highlighter-rouge">t</code> to show tree hierarchy and <code class="highlighter-rouge">h</code> to toggle threads. See also <a href="https://nicolargo.github.io/glances/"><code class="highlighter-rouge">glances</code></a> for similar implementation with a great UI. For getting aggregate measures across all processes, <a href="http://dag.wiee.rs/home-made/dstat/"><code class="highlighter-rouge">dstat</code></a> is another nifty tool that computes real-time resource metrics for lots of different subsystems like I/O, networking, CPU utilization, context switches, &amp;c.</li>
  <li><strong>I/O operations</strong> - <a href="http://man7.org/linux/man-pages/man8/iotop.8.html"><code class="highlighter-rouge">iotop</code></a> displays live I/O usage information and is handy to check if a process is doing heavy I/O disk operations</li>
  <li><strong>Disk Usage</strong> - <a href="http://man7.org/linux/man-pages/man1/df.1.html"><code class="highlighter-rouge">df</code></a> displays metrics per partitions and <a href="http://man7.org/linux/man-pages/man1/du.1.html"><code class="highlighter-rouge">du</code></a> displays <strong>d</strong>isk <strong>u</strong>sage per file for the current directory. In these tools the <code class="highlighter-rouge">-h</code> flag tells the program to print with <strong>h</strong>uman readable format. A more interactive version of <code class="highlighter-rouge">du</code> is <a href="https://dev.yorhel.nl/ncdu"><code class="highlighter-rouge">ncdu</code></a> which lets you navigate folders and delete files and folders as you navigate.</li>
  <li><strong>Memory Usage</strong> - <a href="http://man7.org/linux/man-pages/man1/free.1.html"><code class="highlighter-rouge">free</code></a> displays the total amount of free and used memory in the system. Memory is also displayed in tools like <code class="highlighter-rouge">htop</code>.</li>
  <li><strong>Open Files</strong> - <a href="http://man7.org/linux/man-pages/man8/lsof.8.html"><code class="highlighter-rouge">lsof</code></a> lists file information about files opened by processes. It can be quite useful for checking which process has opened a specific file.</li>
  <li><strong>Network Connections and Config</strong> - <a href="http://man7.org/linux/man-pages/man8/ss.8.html"><code class="highlighter-rouge">ss</code></a> lets you monitor incoming and outgoing network packets statistics as well as interface statistics. A common use case of <code class="highlighter-rouge">ss</code> is figuring out what process is using a given port in a machine. For displaying routing, network devices and interfaces you can use <a href="http://man7.org/linux/man-pages/man8/ip.8.html"><code class="highlighter-rouge">ip</code></a>. Note that <code class="highlighter-rouge">netstat</code> and <code class="highlighter-rouge">ifconfig</code> have been deprecated in favor of the former tools respectively.</li>
  <li><strong>Network Usage</strong> - <a href="https://github.com/raboof/nethogs"><code class="highlighter-rouge">nethogs</code></a> and <a href="http://www.ex-parrot.com/pdw/iftop/"><code class="highlighter-rouge">iftop</code></a> are good interactive CLI tools for monitoring network usage.</li>
</ul>

<h2 id="6-metaprogramming">6. Metaprogramming</h2>

<ul>
  <li>paper</li>
  <li>source code</li>
  <li>tool</li>
  <li>dependency</li>
</ul>

<h3 id="build-systems">Build systems</h3>

<p><strong>make</strong></p>

<p>ubuntu에서 make 명령어는 파일 관리 유틸리티이다. make 명령어를 실행하는 위치에 Makefile이 있어야 한다.</p>

<p>Makefile은 다음과 같은 구조를 가진다.</p>

<ul>
  <li>Target: 명령어가 실행되어 나온 결과를 저장할 파일</li>
  <li>Dependency: Target을 만들기 위해 필요한 재료</li>
  <li>Command: 실행되어야 할 명령어들</li>
  <li>macro: 코드를 단순화 시키기 위한 방법</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CC=&lt;컴파일러&gt;
CFLAGS=&lt;컴파일 옵션&gt;
LDFLAGS=&lt;링크 옵션&gt;
LDLIBS=&lt;링크 라이브러리 목록&gt;
OBJS=&lt;Object 파일 목록&gt;
TARGET=&lt;빌드 대상 이름&gt;
 
all: $(TARGET)
 
clean:
    rm -f *.o
    rm -f $(TARGET)
 
$(TARGET): $(OBJS)
$(CC) -o $@ $(OBJS)
</code></pre></div></div>

<p>빌드규칙 블록</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Target&gt;: &lt;Dependencies&gt;
    &lt;Recipe&gt;
</code></pre></div></div>

<ul>
  <li><strong>Target:</strong> 빌드 대상 이름. 통상 이 Rule에서 최종적으로 생성해내는 파일명을 써 줍니다.</li>
  <li><strong>Dependencies:</strong> 빌드 대상이 의존하는 Target이나 파일 목록. 여기에 나열된 대상들을 먼저 만들고 빌드 대상을 생성합니다.</li>
  <li><strong>Recipe:</strong> 빌드 대상을 생성하는 명령. 여러 줄로 작성할 수 있으며, 각 줄 시작에 반드시 Tab문자로 된 Indent가 있어야 합니다.</li>
</ul>

<p>예시</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>paper.pdf: paper.tex plot-data.png
	pdflatex paper.tex

plot-%.png: %.dat plot.py
	./plot.py -i $*.dat -o $@

# %: pattern
# $@: current target
# reference: http://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html
</code></pre></div></div>

<ul>
  <li>자세한 정보를 알고 싶다면, https://www.tuwlab.com/ece/27193</li>
</ul>

<h3 id="dependency-management">Dependency management</h3>

<p><a href="https://spoqa.github.io/2012/12/18/semantic-versioning.html">semantic versioning</a></p>

<h3 id="continuous-integration-systems">Continuous integration systems</h3>

<ul>
  <li>Github Actions</li>
  <li>Travis CI</li>
  <li>Pipelines</li>
</ul>

<h3 id="a-brief-aside-on-testing">A brief aside on testing</h3>
<ul>
  <li>test suite</li>
  <li>unit test</li>
  <li>intergration test</li>
  <li>regression test</li>
  <li>
    <p>Mocking</p>
  </li>
  <li>Reference: https://missing.csail.mit.edu/2020/?fbclid=IwAR2gQe5LToKuqVUwbfegqSOk6BnIqscbnqjK0e3js64EceMswNqW0KgeSEo</li>
</ul>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="RoundTable/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/blog/shell/bash/2020/03/05/missing-semeste-%EC%A0%95%EB%A6%AC%EA%B8%80.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Tech Blog</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/fastai" title="fastai"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/fastdotai" title="fastdotai"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
